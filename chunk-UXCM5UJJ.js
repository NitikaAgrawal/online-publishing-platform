import{a as B,b as Q}from"./chunk-3ILFL4BD.js";import{a as I}from"./chunk-CUOD727F.js";import{Fa as N,Ha as C,I as O,Ia as z,J as P,Ja as q,K as r,La as D,M as w,Ma as V,Na as A,Oa as H,Pa as U,Qa as G,R as p,Ra as L,S as l,T as y,Ta as R,Ua as j,V as i,W as t,X as d,Y as x,Z as u,_ as f,ba as a,ca as S,da as b,qa as F,ra as E,ta as k,u as g,x as M,y as h,za as T}from"./chunk-PUGWSKDQ.js";function $(o,c){o&1&&(i(0,"div",20),a(1," Title is required "),t())}function J(o,c){if(o&1&&(i(0,"option",21),a(1),t()),o&2){let e=c.$implicit;l("value",e),r(),b(" ",e," ")}}function K(o,c){o&1&&(i(0,"div",20),a(1," Category is required "),t())}function X(o,c){o&1&&(i(0,"div",20),a(1," Description is required "),t())}function Y(o,c){if(o&1&&(i(0,"div",22),d(1,"img",23),t()),o&2){let e=f();r(),l("src",e.imagePreview,P)}}function Z(o,c){if(o&1&&(i(0,"div",22),d(1,"img",23),t()),o&2){let e=f(2);r(),l("src",e.imagePreview,P)}}function ee(o,c){if(o&1){let e=x();i(0,"div",24)(1,"div",25)(2,"button",26),u("click",function(){M(e);let m=f();return h(m.showPreview=!1)}),a(3,"\xD7"),t(),i(4,"h2"),a(5),t(),i(6,"p")(7,"strong"),a(8,"Category:"),t(),a(9),t(),d(10,"div",27),p(11,Z,2,1,"div",15),t()()}if(o&2){let e=f();r(5),S(e.postForm.value.title),r(4),b(" ",e.postForm.value.category,""),r(),l("innerHTML",e.postForm.value.description,O),r(),l("ngIf",e.imagePreview)}}var W=class o{fb=g(L);articleService=g(j);authService=g(I);router=g(T);categories=["Technology","Business","Science","Health","Entertainment","Sports"];imagePreview=null;showPreview=!1;selectedFile=null;postForm=this.fb.group({title:["",C.required],category:["",C.required],description:["",C.required]});quillModules={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["link","image","video"],["clean"]]};onFileChange(c){let e=c.target;if(e.files&&e.files.length>0){this.selectedFile=e.files[0];let n=new FileReader;n.onload=()=>{this.imagePreview=n.result},n.readAsDataURL(this.selectedFile)}}previewPost(){this.showPreview=!0}onSubmit(){if(this.postForm.valid){let c=this.authService.getCurrentUser();if(!c)return;let e=this.postForm.value,n={title:e.title,description:e.description,content:e.description,authorId:c.id,tags:[e.category],category:e.category,thumbnail:this.imagePreview||void 0,isFeatured:!1,isEditorsPick:!1,status:"published"};this.articleService.createArticle(n),this.router.navigate(["/articles"])}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=w({type:o,selectors:[["app-create-post"]],decls:33,vars:11,consts:[[1,"create-post-container",2,"background-color","beige","margin-top","-40px"],[2,"font-weight","bolder","font-size","xx-large","color","rgb(6, 102, 105)","background-color","rgb(247, 236, 22)"],["enctype","multipart/form-data",3,"ngSubmit","formGroup"],[1,"form-group"],["for","title",2,"font-weight","bold","font-size","large","color","hsl(0, 99%, 45%)"],["type","text","id","title","formControlName","title","placeholder","Enter post title",2,"width","97%"],["class","validation-error",4,"ngIf"],["for","category",2,"font-weight","bold","font-size","large","color","hsl(0, 99%, 45%)"],["id","category","formControlName","category"],["value",""],[3,"value",4,"ngFor","ngForOf"],[2,"font-weight","bold","font-size","large","color","hsl(0, 99%, 45%)"],["formControlName","description","placeholder","Write your post content here...",2,"width","100%","height","50%","background-color","white",3,"modules"],["for","image",2,"font-weight","bold","font-size","large","color","hsl(0, 99%, 45%)"],["type","file","id","image","accept","image/*",3,"change"],["class","preview-image",4,"ngIf"],[1,"form-actions"],["type","button",1,"secondary-button",2,"background-color","brown","color","white",3,"click"],["type","submit",1,"primary-button",3,"disabled"],["class","preview-modal",4,"ngIf"],[1,"validation-error"],[3,"value"],[1,"preview-image"],["alt","Preview",3,"src"],[1,"preview-modal"],[1,"preview-content"],[1,"close-button",3,"click"],[1,"preview-description",3,"innerHTML"]],template:function(e,n){if(e&1&&(i(0,"div",0)(1,"h2",1),a(2,"Create New Post"),t(),i(3,"form",2),u("ngSubmit",function(){return n.onSubmit()}),i(4,"div",3)(5,"label",4),a(6,"Post Title"),t(),d(7,"input",5),p(8,$,2,0,"div",6),t(),i(9,"div",3)(10,"label",7),a(11,"Category"),t(),i(12,"select",8)(13,"option",9),a(14,"Select a category"),t(),p(15,J,2,2,"option",10),t(),p(16,K,2,0,"div",6),t(),i(17,"div",3)(18,"label",11),a(19,"Description"),t(),d(20,"quill-editor",12),p(21,X,2,0,"div",6),t(),i(22,"div",3)(23,"label",13),a(24,"Image"),t(),i(25,"input",14),u("change",function(s){return n.onFileChange(s)}),t(),p(26,Y,2,1,"div",15),t(),i(27,"div",16)(28,"button",17),u("click",function(){return n.previewPost()}),a(29,"Preview"),t(),i(30,"button",18),a(31,"Publish"),t()()(),p(32,ee,12,4,"div",19),t()),e&2){let m,s,_,v;r(3),l("formGroup",n.postForm),r(4),y("invalid",((m=n.postForm.get("title"))==null?null:m.invalid)&&((m=n.postForm.get("title"))==null?null:m.touched)),r(),l("ngIf",((s=n.postForm.get("title"))==null?null:s.invalid)&&((s=n.postForm.get("title"))==null?null:s.touched)),r(7),l("ngForOf",n.categories),r(),l("ngIf",((_=n.postForm.get("category"))==null?null:_.invalid)&&((_=n.postForm.get("category"))==null?null:_.touched)),r(4),l("modules",n.quillModules),r(),l("ngIf",((v=n.postForm.get("description"))==null?null:v.invalid)&&((v=n.postForm.get("description"))==null?null:v.touched)),r(5),l("ngIf",n.imagePreview),r(4),l("disabled",n.postForm.invalid),r(2),l("ngIf",n.showPreview)}},dependencies:[k,F,E,R,D,U,G,N,H,z,q,V,A,Q,B],styles:[".create-post-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem}.create-post-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500}.create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem}.create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text].invalid[_ngcontent-%COMP%], .create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.invalid[_ngcontent-%COMP%]{border-color:#f44}.create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .validation-error[_ngcontent-%COMP%]{color:#f44;font-size:.875rem;margin-top:.25rem}.create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{margin-top:1rem}.create-post-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border-radius:4px}.create-post-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}.create-post-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s}.create-post-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.primary-button[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff}.create-post-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.primary-button[_ngcontent-%COMP%]:hover{background-color:#3367d6}.create-post-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.primary-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.create-post-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.secondary-button[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#333}.create-post-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button.secondary-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.create-post-container[_ngcontent-%COMP%]   .preview-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.create-post-container[_ngcontent-%COMP%]   .preview-modal[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:8px;max-width:800px;width:90%;max-height:90vh;overflow-y:auto;position:relative}.create-post-container[_ngcontent-%COMP%]   .preview-modal[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;cursor:pointer}.create-post-container[_ngcontent-%COMP%]   .preview-modal[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .preview-description[_ngcontent-%COMP%]{margin-top:1rem;line-height:1.6}.create-post-container[_ngcontent-%COMP%]   .preview-modal[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.create-post-container[_ngcontent-%COMP%]   .preview-modal[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border-radius:4px}"]})};export{W as a};
