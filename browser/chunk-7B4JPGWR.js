import{a as I}from"./chunk-CUOD727F.js";import{Aa as j,Fa as V,I as D,Ia as L,J as C,K as e,Ka as R,M as h,R as d,S as m,Sa as W,T as v,Ua as E,V as n,W as o,X as p,Y as T,Z as u,_ as g,ba as r,ca as s,da as M,fa as z,ga as F,ha as B,ja as U,ka as b,la as x,qa as S,ra as y,sa as w,ta as k,u as _,x as O,xa as N,y as f}from"./chunk-PUGWSKDQ.js";import"./chunk-GAL4ENT6.js";function J(i,c){if(i&1){let t=T();n(0,"div",7)(1,"textarea",8),B("ngModelChange",function(l){O(t);let P=g();return F(P.newComment,l)||(P.newComment=l),f(l)}),o(),n(2,"button",9),u("click",function(){O(t);let l=g();return f(l.addComment())}),r(3,"Post Comment"),o()()}if(i&2){let t=g();e(),z("ngModel",t.newComment),e(),m("disabled",!t.newComment.trim())}}function K(i,c){i&1&&(n(0,"div",10)(1,"p"),r(2,"Please "),n(3,"a",11),r(4,"login"),o(),r(5," to post a comment."),o()())}function Q(i,c){if(i&1){let t=T();n(0,"div",12)(1,"div",13),p(2,"img",14),n(3,"div",15)(4,"span",16),r(5),o(),n(6,"span",17),r(7),b(8,"date"),o()()(),n(9,"div",18),r(10),o(),n(11,"div",19)(12,"button",2),u("click",function(){let l=O(t).$implicit,P=g();return f(P.likeComment(l.id))}),r(13),o()()()}if(i&2){let t=c.$implicit;e(2),m("src",(t.author==null?null:t.author.profilePicture)||"assets/comment.jpeg",C)("alt",t.author==null?null:t.author.name),e(3),s(t.author==null?null:t.author.name),e(2),s(x(8,6,t.createdAt)),e(3),s(t.content),e(3),M(" Like (",t.likes,") ")}}var A=class i{articleService=_(E);authService=_(I);articleId;newComment="";sortBy="newest";get comments(){let c=this.articleService.getArticle(this.articleId);return c?.comments?[...c.comments].sort((t,a)=>this.sortBy==="newest"?a.createdAt.getTime()-t.createdAt.getTime():this.sortBy==="oldest"?t.createdAt.getTime()-a.createdAt.getTime():a.likes-t.likes):[]}get currentUser(){return this.authService.getCurrentUser()}addComment(){this.newComment.trim()&&this.currentUser&&(this.articleService.addComment(this.articleId,{authorId:this.currentUser.id,content:this.newComment,likes:0,articleId:this.articleId}),this.newComment="")}likeComment(c){this.articleService.likeComment(this.articleId,c)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["app-comment-section"]],inputs:{articleId:"articleId"},decls:16,vars:10,consts:[[1,"comment-section",2,"font-weight","bold","background-color","azure"],[1,"comment-sort"],[3,"click"],["class","comment-form","style","font-weight: bold;",4,"ngIf"],["class","login-prompt",4,"ngIf"],[1,"comments-list"],["class","comment",4,"ngFor","ngForOf"],[1,"comment-form",2,"font-weight","bold"],["placeholder","Write your comment...",2,"width","94%",3,"ngModelChange","ngModel"],[2,"background-color","cadetblue","color","black",3,"click","disabled"],[1,"login-prompt"],["routerLink","/login"],[1,"comment"],[1,"comment-header"],[1,"comment-author-image",3,"src","alt"],[1,"comment-author-info"],[1,"comment-author-name"],[1,"comment-date"],[1,"comment-content"],[1,"comment-actions"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h3"),r(2),o(),n(3,"div",1)(4,"span"),r(5,"Sort by:"),o(),n(6,"button",2),u("click",function(){return a.sortBy="newest"}),r(7," Newest "),o(),n(8,"button",2),u("click",function(){return a.sortBy="oldest"}),r(9," Oldest "),o(),n(10,"button",2),u("click",function(){return a.sortBy="popular"}),r(11," Most Liked "),o()(),d(12,J,4,2,"div",3)(13,K,6,0,"div",4),n(14,"div",5),d(15,Q,14,8,"div",6),o()()),t&2&&(e(2),M("Comments (",a.comments.length,")"),e(4),v("active",a.sortBy==="newest"),e(2),v("active",a.sortBy==="oldest"),e(2),v("active",a.sortBy==="popular"),e(2),m("ngIf",a.currentUser),e(),m("ngIf",!a.currentUser),e(2),m("ngForOf",a.comments))},dependencies:[k,S,y,w,W,V,L,R],styles:[".comment-section[_ngcontent-%COMP%]{margin-top:3rem;padding-top:2rem;border-top:1px solid #eee}.comment-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1.5rem}.comment-section[_ngcontent-%COMP%]   .comment-sort[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem}.comment-section[_ngcontent-%COMP%]   .comment-sort[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.5rem}.comment-section[_ngcontent-%COMP%]   .comment-sort[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.3rem .8rem;background:#f0f0f0;border:none;border-radius:4px;cursor:pointer;font-size:.9rem}.comment-section[_ngcontent-%COMP%]   .comment-sort[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#4285f4;color:#fff}.comment-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]{margin-bottom:2rem}.comment-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid #ddd;border-radius:4px;min-height:100px;margin-bottom:1rem;font-family:inherit}.comment-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.7rem 1.5rem;background:#4285f4;color:#fff;border:none;border-radius:4px;cursor:pointer}.comment-section[_ngcontent-%COMP%]   .comment-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.comment-section[_ngcontent-%COMP%]   .login-prompt[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1rem;background:#f8f9fa;border-radius:4px;text-align:center}.comment-section[_ngcontent-%COMP%]   .login-prompt[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4285f4;text-decoration:none}.comment-section[_ngcontent-%COMP%]   .login-prompt[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{padding:1.5rem 0;border-bottom:1px solid #f0f0f0}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]:last-child{border-bottom:none}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-author-image[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;margin-right:1rem}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-author-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-author-info[_ngcontent-%COMP%]   .comment-author-name[_ngcontent-%COMP%]{font-weight:600}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .comment-author-info[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]{font-size:.8rem;color:#666}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.6}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#666;cursor:pointer;padding:.3rem .5rem;font-size:.9rem}.comment-section[_ngcontent-%COMP%]   .comments-list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#4285f4}"]})};var X=i=>["/articles",i];function Y(i,c){if(i&1&&(n(0,"div",19),p(1,"img",20),o()),i&2){let t=g(2);e(),m("src",t.article.thumbnail,C)("alt",t.article.title)}}function Z(i,c){if(i&1&&(n(0,"span",21),r(1),o()),i&2){let t=c.$implicit;e(),s(t)}}function tt(i,c){if(i&1&&(n(0,"div",25)(1,"a",26),p(2,"img",20),n(3,"h4"),r(4),o()()()),i&2){let t=c.$implicit;e(),m("routerLink",U(4,X,t.id)),e(),m("src",t.thumbnail||"assets/default-article.jpeg",C)("alt",t.title),e(2),s(t.title)}}function et(i,c){if(i&1&&(n(0,"div",22)(1,"h3"),r(2,"Recommended for you"),o(),n(3,"div",23),d(4,tt,5,6,"div",24),o()()),i&2){let t=g(2);e(4),m("ngForOf",t.relatedArticles)}}function nt(i,c){if(i&1&&(n(0,"div",1)(1,"div",2)(2,"h1"),r(3),o(),n(4,"div",3)(5,"div",4),p(6,"img",5),n(7,"div")(8,"span",6),r(9),o(),n(10,"span",7),r(11),b(12,"date"),o()()(),n(13,"div",8)(14,"span",9),r(15),o(),n(16,"span",10),r(17),o()()()(),n(18,"div",11),d(19,Y,2,2,"div",12),p(20,"div",13),o(),n(21,"div",14)(22,"div",15),d(23,Z,2,1,"span",16),o()(),p(24,"app-comment-section",17),d(25,et,5,1,"div",18),o()),i&2){let t=g();e(3),s(t.article.title),e(3),m("src",(t.author==null?null:t.author.profilePicture)||"assets/default-profile.jpeg",C)("alt",t.author==null?null:t.author.name),e(3),s(t.author==null?null:t.author.name),e(2),s(x(12,12,t.article.publishDate)),e(4),M("",t.article.views," views"),e(2),M("",t.article.likes," likes"),e(2),m("ngIf",t.article.thumbnail),e(),m("innerHTML",t.article.content,D),e(3),m("ngForOf",t.article.tags),e(),m("articleId",t.article.id),e(),m("ngIf",t.relatedArticles.length>0)}}var H=class i{articleService=_(E);route=_(N);authService=_(I);articleId=this.route.snapshot.paramMap.get("id");article=this.articleService.getArticle(this.articleId);author=this.article?this.articleService.getAuthor(this.article.authorId):null;relatedArticles=this.article?this.articleService.getRelatedArticles(this.article.id):[];currentUser=this.authService.getCurrentUser();ngOnInit(){this.article&&this.articleService.incrementViews(this.article.id)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["app-article-detail"]],decls:1,vars:1,consts:[["class","article-detail","style","background-color:azure; font-weight: bold;",4,"ngIf"],[1,"article-detail",2,"background-color","azure","font-weight","bold"],[1,"article-header"],[1,"article-meta"],[1,"author-info"],[1,"author-image",3,"src","alt"],[1,"author-name"],[1,"publish-date"],[1,"article-stats"],[2,"background-color","red","color","white"],[2,"background-color","rgb(27, 211, 244)","color","white"],[1,"article-content"],["class","thumbnail",4,"ngIf"],[1,"content",2,"background-color","rgb(156, 241, 241)",3,"innerHTML"],[1,"article-footer"],[1,"tags",2,"background-color","rgb(247, 236, 22)","height","30px"],["class","tag","style","background-color:rgb(6, 102, 105);color: white;",4,"ngFor","ngForOf"],[3,"articleId"],["class","related-articles",4,"ngIf"],[1,"thumbnail"],[3,"src","alt"],[1,"tag",2,"background-color","rgb(6, 102, 105)","color","white"],[1,"related-articles"],[1,"articles-grid"],["class","related-article",4,"ngFor","ngForOf"],[1,"related-article"],[3,"routerLink"]],template:function(t,a){t&1&&d(0,nt,26,14,"div",0),t&2&&m("ngIf",a.article)},dependencies:[k,S,y,w,j,A],styles:[".article-detail[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:0 1rem}.article-detail[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]{margin-bottom:2rem}.article-detail[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.article-detail[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.article-detail[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]   .author-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.article-detail[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]   .author-info[_ngcontent-%COMP%]   .author-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover}.article-detail[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]   .author-info[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{font-weight:600;display:block}.article-detail[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]   .author-info[_ngcontent-%COMP%]   .publish-date[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.article-detail[_ngcontent-%COMP%]   .article-header[_ngcontent-%COMP%]   .article-meta[_ngcontent-%COMP%]   .article-stats[_ngcontent-%COMP%]{color:#666;display:flex;gap:1rem}.article-detail[_ngcontent-%COMP%]   .article-content[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{margin-bottom:2rem}.article-detail[_ngcontent-%COMP%]   .article-content[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:400px;object-fit:cover;border-radius:8px}.article-detail[_ngcontent-%COMP%]   .article-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{line-height:1.8;font-size:1.1rem}.article-detail[_ngcontent-%COMP%]   .article-footer[_ngcontent-%COMP%]{margin:2rem 0;padding:1rem 0;border-top:1px solid #eee;border-bottom:1px solid #eee}.article-detail[_ngcontent-%COMP%]   .article-footer[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.article-detail[_ngcontent-%COMP%]   .article-footer[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:#f0f0f0;padding:.3rem .8rem;border-radius:20px;font-size:.9rem}.article-detail[_ngcontent-%COMP%]   .related-articles[_ngcontent-%COMP%]{margin-top:3rem}.article-detail[_ngcontent-%COMP%]   .related-articles[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1.5rem}.article-detail[_ngcontent-%COMP%]   .related-articles[_ngcontent-%COMP%]   .articles-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem}.article-detail[_ngcontent-%COMP%]   .related-articles[_ngcontent-%COMP%]   .articles-grid[_ngcontent-%COMP%]   .related-article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.article-detail[_ngcontent-%COMP%]   .related-articles[_ngcontent-%COMP%]   .articles-grid[_ngcontent-%COMP%]   .related-article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;border-radius:8px;margin-bottom:.5rem}.article-detail[_ngcontent-%COMP%]   .related-articles[_ngcontent-%COMP%]   .articles-grid[_ngcontent-%COMP%]   .related-article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;margin:0}"]})};export{H as ArticleDetailComponent};
